<!--
=========================================================
Material Dashboard - v2.1.2
=========================================================

Product Page: https://www.creative-tim.com/product/material-dashboard
Copyright 2020 Creative Tim (https://www.creative-tim.com)
Coded by Creative Tim

=========================================================
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->

<!DOCTYPE html>
<html lang="en">
<%- contentFor('header') %>

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="img/apple-icon.png">
  <link rel="icon" type="image/png" href="img/favicon.png">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/lumen/bootstrap.min.css" />

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Material Dashboard by Creative Tim
  </title>
  <meta content='width=device-width, initial-scale=1.0, shrink-to-fit=no' name='viewport' />
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css"
    href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
  <!-- CSS Files -->
  <!-- CSS Just for demo purpose, don't include it in your project -->

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.css">

  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet"
    type="text/css">
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
  <!-- Theme CSS -->

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/lumen/bootstrap.min.css" />
  <link href="css/material-dashboard.css?v=2.1.2" rel="stylesheet" />
  <script src="js/material-dashboard.js?v=2.1.2" type="text/javascript"></script>


  <style>
    * {
      box-sizing: border-box
    }

    /* Set a style for all buttons */
    button {
      background-color: #4CAF50;
      color: white;
      padding: 14px 20px;
      margin: 8px 0;
      border: none;
      cursor: pointer;
      width: 100%;
      opacity: 0.9;
    }

    button:hover {
      opacity: 1;
    }

    /* Float cancel and delete buttons and add an equal width */
    .cancelbtn,
    .deletebtn {
      float: left;
      width: 50%;
    }

    /* Add a color to the cancel button */
    .cancelbtn {
      background-color: #ccc;
      color: black;
    }

    /* Add a color to the delete button */
    .deletebtn {
      background-color: #f44336;
    }

    /* Add padding and center-align text to the container */
    .container {
      padding: 16px;
      text-align: center;
    }

    /* The Modal (background) */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: #474e5d;
      padding-top: 50px;
    }

    /* Modal Content/Box */
    .modal-content {
      background-color: #fefefe;
      margin: 5% auto 15% auto;
      /* 5% from the top, 15% from the bottom and centered */
      border: 1px solid #888;
      width: 80%;
      /* Could be more or less, depending on screen size */
    }

    /* Style the horizontal ruler */
    hr {
      border: 1px solid #f1f1f1;
      margin-bottom: 25px;
    }

    /* The Modal Close Button (x) */
    .close {
      position: absolute;
      right: 35px;
      top: 15px;
      font-size: 40px;
      font-weight: bold;
      color: #f1f1f1;
    }

    .close:hover,
    .close:focus {
      color: #f44336;
      cursor: pointer;
    }

    /* Clear floats */
    .clearfix::after {
      content: "";
      clear: both;
      display: table;
    }

    /* Change styles for cancel button and delete button on extra small screens */
    @media screen and (max-width: 300px) {

      .cancelbtn,
      .deletebtn {
        width: 100%;
      }
    }
  </style>
</head>

<body class="">
  <div class="wrapper ">
    <div class="sidebar" data-color="purple" data-background-color="white" data-image="img/sidebar-1.jpg">
      <div class="logo"><a href="http://www.creative-tim.com" class="simple-text logo-normal">
          SIAP BERGOTA
        </a></div>
      <div class="sidebar-wrapper">

        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="./dashboard">
              <i class="material-icons">dashboard</i>
              <p>Data Makam</p>
            </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="./tables">
              <i class="material-icons">content_paste</i>
              <p>Daftar Makam</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./pengaturan">
              <i class="material-icons">settings</i>
              <p>Pengaturan</p>
            </a>
          </li>
          <li class="nav-item ">
            <a class="nav-link" href="./signOut">
              <i class="material-icons">login</i>
              <p>Keluar</p>
            </a>
          </li>
      </div>
    </div>
    <div class="main-panel">
      <nav class="navbar navbar-transparent navbar-absolute fixed-top ">
        <div class="col-md-12">
          <button onclick="document.getElementById('id01').style.display='block'" class="btn btn-primary">Buka Data
            Baru</button>
          <div id="id01" class="modal">
            <span onclick="document.getElementById('id01').style.display='none'" class="close"
              title="Close Modal">&times;</span>
            <div class="" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Detail Data</h5>
                </div>
                <div class="modal-body">
                  <div class="p-3">
                    <form action="/addData" method="POST">
                      <h3>Data Jenazah</h3>
                      <div class="form-group">
                        <label class="label-control">Nama Lengkap</label>
                        <input type="text" name="namaLengkapJenazah" placeholder="Masukkan Nama Lengkap Jenazah"
                          class="form-control" required autofocus required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Tanggal Meninggal</label>
                        <input type="date" id="datepicker" name="tanggalMeninggal"
                          placeholder="Masukkan Tanggal Meninggal" class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Tanggal Kubur</label>
                        <input type="date" id="datepicker1" name="tanggalKubur" placeholder="Masukkan Tanggal Kubur"
                          class="form-control" required>
                      </div>
                      <div class="">
                        <label class="label-control"></label>
                        <br>
                        <label class="radio-inline"><input type="radio" name="jenisKelamin"
                            value="Laki-laki">Laki-laki</label>
                        <label class="radio-inline"><input type="radio" name="jenisKelamin"
                            value="Perempuan">Perempuan</label>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Nama Bapak</label>
                        <input type="text" name="namaBapak" placeholder="Masukkan Nama Bapak Jenazah"
                          class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Nama Ibu</label>
                        <input type="text" name="namaIbu" placeholder="Masukkan Nama Ibu Jenazah" class="form-control"
                          required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Nama Istri/Suami</label>
                        <input type="text" name="namaIstriSuami" placeholder="Masukkan Nama Istri/Suami Jenazah"
                          class="form-control" required>
                      </div>
                      <h3>Data Makam</h3>
                      <div class="form-group">
                        <label class="label-control">Blok</label>
                        <input type="text" name="blok" placeholder="Masukkan Blok makam" class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Bagian</label>
                        <input type="text" name="bagian" placeholder="Masukkan Bagian makam" class="form-control"
                          required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Petak</label>
                        <input type="text" name="petak" placeholder="Masukkan Petak makam" class="form-control"
                          required>
                      </div>
                      <h3>Data Penanggung Jawab</h3>
                      <div class="form-group">
                        <label class="label-control">Nama Lengkap</label>
                        <input type="text" name="namaLengkapPenanggungJawab"
                          placeholder="Masukkan Nama Lengkap Penanggung Jawab" class="form-control" required autofocus>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Hubungan dengan Jenazah</label>
                        <input type="text" name="hubunganDenganPenanggungJawab"
                          placeholder="Masukkan Hubungan dengan Jenazah" class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Alamat</label>
                        <input type="text" name="alamatPenanggungJawab" placeholder="Masukkan Alamat"
                          class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Nomor HP</label>
                        <input type="number" name="nomorhpPenanggungJawab" placeholder="Masukkan Nomor Handphone"
                          class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Kelurahan</label>
                        <input type="text" name="kelurahanPenanggungJawab" placeholder="Masukkan Kelurahan"
                          class="form-control" required>
                      </div>
                      <div class="form-group">
                        <label class="label-control">Kecamatan</label>
                        <input type="text" name="kecamatanPenanggungJawab" placeholder="Masukkan Kecamatan"
                          class="form-control" required>
                      </div>
                      <button class="btn btn-primary btn-block">
                        Tambah Data
                      </button>

                    </form>
                  </div>
                </div>
                <div class="modal-footer">
                  <button onclick="document.getElementById('id01').style.display='none'" type="button"
                    class="btn btn-secondary" data-dismiss="modal">Batal</button>
                </div>
              </div>
            </div>



          </div>

        </div>


      </nav>
      <!-- Navbar -->
      <!-- End Navbar -->
      <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header card-header-primary">
                  <h4 class="card-title ">Dashboard</h4>
                  <p class="card-category">Data Makam di TPU Bergota</p>
                </div>

                <div class="card-body">

                  <div class="table-responsive">
                    <div id="tableIPAProv">
                      <table id="table" data-toggle="table" data-height="480" data-ajax="ajaxRequest"
                        data-side-pagination="server" data-pagination="true" data-detail-view="true"
                        data-show-columns="true" data-show-fullscreen="true" data-buttons-class="primary"
                        data-detail-formatter="detailFormatter">
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>


  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Detail Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Ok</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLongTitle">Detail Data</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Ok</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="tambahDataModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle"
    aria-hidden="true">

  </div>








</body>


<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
  integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
  crossorigin="" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="css/bootstrap-table.min.css">


<!-- Plugin JavaScript -->

<!-- Contact Form JavaScript -->

<!-- Latest compiled and minified JavaScript -->
<!-- Latest compiled and minified Locales -->
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
  integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
  crossorigin=""></script>
<script type="text/javascript" src="idpeningkatan.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
  integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
</script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
  integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
</script>
<script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<script src="js/jqBootstrapValidation.js"></script>
<script src="js/contact_me.js"></script>


<!-- Custom scripts for this template -->
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="js/freelancer.min.js"></script>

<script src="getData.js"></script>
<script src="tabel.js"></script>
<script src="map.js"></script>

<!-- Custom scripts for this template -->

<script>
  // your custom ajax request here
  function ajaxRequest2(params) {
    var url = 'https://examples.wenzhixin.net.cn/examples/bootstrap_table/data'
    $.get(url + '?' + $.param(params.data)).then(function (res) {
      params.success(res)
    })
  }
</script>
<script>
  $("input[required], select[required]").attr("oninvalid", "this.setCustomValidity('Masukkan ini tidak boleh kosong')");
  $("input[required], select[required]").attr("oninput", "setCustomValidity('')");

  function detailFormatter(index, row) {
    var html = []
    $.each(row, function (key, value) {
      html.push('<p><b>' + key + ':</b> ' + value + '</p>')
    })
    return html.join('')
  }

  function ajaxRequest(params) {
    var url = '/getDataMakam'
    $.get(url + '?' + $.param(params.data)).then(function (res) {
      params.success(res)
      console.log(res)
    })
  }

  var $table = $('#table')
  var $remove = $('#remove')
  var selections = []

  function getIdSelections() {
    return $.map($table.bootstrapTable('getSelections'), function (row) {
      return row.id
    })
  }

  function responseHandler(res) {
    $.each(res.rows, function (i, row) {
      row.state = $.inArray(row.id, selections) !== -1
    })
    return res
  }

  function detailFormatter(index, row) {
    var html = []
    $.each(row, function (key, value) {
      html.push('<p><b>' + key + ':</b> ' + value + '</p>')
    })
    return html.join('')
  }

  function operateFormatter(value, row, index) {
    return [
      '<a class="edit" href="javascript:void(0)" title="Edit Data">',
      '<button type="button" class="btn btn-primary">Edit Data</button>',
      '</a>',
      '<a class="remove" href="javascript:void(0)" title="Hapus Data">',
      '<button type="button" class="btn btn-danger">Hapus Data</button>',
      '</a>  ',
    ].join('')
  }

  window.operateEvents = {
    'click .remove': function (e, value, row, index) {
      $.post('/hapusDataMakam', // url
        row, // data to be submit
        function (data, status, jqXHR) { // success callback
          alert('You click like action, row: ' + JSON.stringify(row))
        });

    },
    'click .edit': function (e, value, row, index) {

      alert('You click like action, row: ' + JSON.stringify(row))

    }
  }

  function totalTextFormatter(data) {
    return 'Total'
  }

  function totalNameFormatter(data) {
    return data.length
  }

  function totalPriceFormatter(data) {
    var field = this.field
    return '$' + data.map(function (row) {
      return +row[field].substring(1)
    }).reduce(function (sum, i) {
      return sum + i
    }, 0)
  }

  function initTable() {
    $table.bootstrapTable('destroy').bootstrapTable({
      height: 550,
      locale: $('#locale').val(),
      columns: [
        [{
            field: 'Nama Jenazah',
            title: 'Nama Jenazah',
            sortable: true,
            footerFormatter: totalNameFormatter,
            align: 'center'
          },
          {
            field: 'Tanggal Meninggal',
            title: 'Tanggal Meninggal',
            sortable: true,
            footerFormatter: totalNameFormatter,
            align: 'center'
          },
          //  {
          //   field: 'Tanggal Kubur',
          //   title: 'Tanggal Kubur',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, {
          //   field: 'Jenis Kelamin',
          //   title: 'Jenis Kelamin',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, 
          // {
          //   field: 'Nama Bapak',
          //   title: 'Nama Bapak',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, {
          //   field: 'Nama Ibu',
          //   title: 'Nama Ibu',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, {
          //   field: 'Nama Istri/Suami',
          //   title: 'Nama Istri/Suami',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // },
          //  {
          //   field: 'Blok',
          //   title: 'Blok',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, {
          //   field: 'Bagian',
          //   title: 'Bagian',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, {
          //   field: 'Petak',
          //   title: 'Petak',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // }, 
          // {
          //   field: 'Nama Penanggung Jawab',
          //   title: 'Nama Penanggung Jawab',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // },
          //  {
          //   field: 'Hubungan PJ',
          //   title: 'Hubungan PJ',
          //   sortable: true,
          //   footerFormatter: totalNameFormatter,
          //   align: 'center'
          // },
          {
            field: 'Nomor Telepon PJ',
            title: 'Nomor Telepon PJ',
            sortable: true,
            footerFormatter: totalNameFormatter,
            align: 'center'
          },
          //  {
          //   field: 'Alamat PJ',
          //   title: 'Alamat PJ',
          //   sortable: true,
          //   align: 'center',
          //   footerFormatter: totalPriceFormatter
          // },
          // {
          //   field: 'Kelurahan PJ',
          //   title: 'Kelurahan PJ',
          //   sortable: true,
          //   align: 'center',
          //   footerFormatter: totalPriceFormatter
          // },
          {
            field: 'Kecamatan PJ',
            title: 'Kecamatan PJ',
            sortable: true,
            align: 'center',
            footerFormatter: totalPriceFormatter
          },

          {
            field: 'Edit Data',
            title: 'Edit Data',
            align: 'center',
            clickToSelect: false,
            events: window.operateEvents,
            formatter: operateFormatter
          }
        ]
      ]
    })
    $table.on('check.bs.table uncheck.bs.table ' +
      'check-all.bs.table uncheck-all.bs.table',
      function () {
        $remove.prop('disabled', !$table.bootstrapTable('getSelections').length)

        // save your data, here just save the current page
        selections = getIdSelections()
        // push or splice the selections if you want to save all data selections
      })
    $table.on('all.bs.table', function (e, name, args) {
      console.log(name, args)
    })
    $remove.click(function () {
      var ids = getIdSelections()
      $table.bootstrapTable('remove', {
        field: 'id',
        values: ids
      })
      $remove.prop('disabled', true)
    })
  }

  $(function () {
    initTable()

    $('#locale').change(initTable)
  })
</script>

</html>