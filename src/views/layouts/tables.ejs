<!--
=========================================================
Material Dashboard - v2.1.2
=========================================================

Product Page: https://www.creative-tim.com/product/material-dashboard
Copyright 2020 Creative Tim (https://www.creative-tim.com)
Coded by Creative Tim

=========================================================
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software. -->
<!DOCTYPE html>
<html lang="en">
<%- contentFor('header') %>
<link href="css/material-dashboard.css?v=2.1.2" rel="stylesheet" />



<body class="">
    <div class="wrapper ">
        <div class="sidebar" data-color="azure" data-background-color="white" data-image="/img/sidebar-1.jpg">
            <div class="sidebar-wrapper">
                <div class="logo"><a href="./dashboard" class="simple-text logo-normal">
                        SIAP BERGOTA
                    </a></div>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link" href="./dashboard">
                            <i class="material-icons">dashboard</i>
                            <p>Data Makam</p>
                        </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="./tables">
                            <i class="material-icons">content_paste</i>
                            <p>Daftar Makam</p>
                        </a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="./pengaturan">
                            <i class="material-icons">settings</i>
                            <p>Pengaturan</p>
                        </a>
                    </li>
                    <li class="nav-item center">
                        <form method="post" action="/logout?_method=DELETE">
                            <button type="submit" class="btn btn-danger">
                                Keluar
                            </button>
                        </form>
                    </li>
            </div>
        </div>
        <div class="main-panel">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-transparent navbar-absolute fixed-top ">
                <div class="container-fluid">
                    <div class="navbar-wrapper">
                        <div class="col-md-12">
                            <!-- Button to Open the Modal -->
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                                Tambah Data Baru
                            </button>

                            <!-- The Modal -->



                        </div>


                    </div>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" aria-controls="navigation-index"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                        <span class="navbar-toggler-icon icon-bar"></span>
                    </button>

                </div>
            </nav>
            <!-- End Navbar -->
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header card-header-primary">
                                    <h4 class="card-title ">Dashboard</h4>
                                    <p class="card-category">Data Makam di TPU Bergota</p>
                                </div>
                                <div class="card-body">

                                    <div class="table-responsive">
                                        <div id="tableIPAProv">
                                            <table id="table" data-toggle="table" data-height="480"
                                                data-ajax="ajaxRequest" data-side-pagination="server"
                                                data-pagination="true" data-detail-view="true" data-show-columns="true"
                                                data-show-fullscreen="true" data-buttons-class="primary"
                                                data-detail-formatter="detailFormatter">
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="myModal" class="modal">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="col-md-8">
                        <h3 class="modal-title" id="exampleModalLongTitle">Tambah Data Baru</h3>
                    </div>
                    <div class="col-md-4">
                        <button onclick="document.getElementById('myModal').style.display='none'" type="button"
                            class="btn btn-danger btn-block" data-dismiss="modal">Batal</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="p-3">
                        <form action="/addDataMakam" method="POST">
                            <h3>Data Ahli Waris</h3>
                            <div class="form-group">
                                <label class="label-control">Nama Lengkap Ahli Waris</label>
                                <input type="text" name="namaAhliWaris" placeholder="Masukkan Nama Ahli Waris"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Pekerjaan</label>
                                <input type="text" name="pekerjaanAhliWaris" placeholder="Masukkan Pekerjaan Ahli Waris"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Alamat Lengkap</label>
                                <input type="text" name="alamatAhliWaris" placeholder="Masukkan Alamat Ahli Waris"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Kelurahan Ahli Waris</label>
                                <input type="text" name="kelurahanAhliWaris" placeholder="Masukkan Kelurahan Ahli Waris"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Kecamatan Ahli Waris</label>
                                <input type="text" name="kecamatanAhliWaris" placeholder="Masukkan Kecamatan Ahli Waris"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Nomor Telepon Ahli Waris</label>
                                <input type="number" name="nomorTeleponAhliWaris"
                                    placeholder="Masukkan Nomor Telepon Ahli Waris" class="form-control" required>
                            </div>
                            <h3>Data Jenazah</h3>
                            <div class="form-group">
                                <label class="label-control">Nama Lengkap Jenazah</label>
                                <input type="text" name="namaJenazah" placeholder="Masukkan Nama Lengkap Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Jenis Kelamin Jenazah</label>
                                <br>
                                <label class="radio"><input type="radio" name="jenisKelamin"
                                        value="Laki-laki">Ada</label>
                                <label class="radio"><input type="radio" name="jenisKelamin" value="Perempuan">Tidak
                                    Ada</label>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Agama Jenazah</label>
                                <input type="text" name="agamaJenazah" placeholder="Masukkan Agama Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Alamat Jenazah</label>
                                <input type="text" name="alamatJenazah" placeholder="Masukkan Alamat Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Kelurahan Jenazah</label>
                                <input type="text" name="kelurahanJenazah" placeholder="Masukkan Kelurahan Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Kecamatan Jenzah</label>
                                <input type="text" name="kecamatanJenazah" placeholder="Masukkan Kecamatan Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Kab/Kota Jenazah</label>
                                <input type="text" name="kabkotaJenazah" placeholder="Masukkan Kab/Kota Jenazah"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Tanggal Meninggal Jenazah</label>
                                <input type="date" id="datepicker" name="tanggalMeninggal"
                                    placeholder="Masukkan Tanggal Meninggal Jenazah" class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Tanggal Dimakamkan Jenazah</label>
                                <input type="date" id="datepicker1" name="tanggalDimakamkan"
                                    placeholder="Masukkan Tanggal Kubur Jenazah" class="form-control" required>
                            </div>
                            <h3>Data Makam</h3>
                            <div class="form-group">
                                <label class="label-control">Lokasi</label>
                                <input type="text" name="lokasi" placeholder="Masukkan Lokasi Makam"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Blok / Perawat</label>
                                <input type="text" name="blok" placeholder="Masukkan Blok / Perawat Makam"
                                    class="form-control" required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Perpetaan Nomor</label>
                                <input type="text" name="perpetaanNomor" placeholder="Masukkan Perpetaan Nomor Makam"
                                    class="form-control" required autofocus required>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Luas</label>
                                <input type="text" name="luas" placeholder="Masukkan Luas Makam" class="form-control"
                                    required autofocus required>
                            </div>
                            <h3>Syarat Pemakaman</h3>
                            <div class="form-group">
                                <label class="label-control">Surat Pemeriksaan Mayat</label>
                                <br>
                                <label class="radio"><input type="radio" name="isSuratPemeriksaanMayat"
                                        value="Ada">Ada</label>

                                <label class="radio"><input type="radio" name="isSuratPemeriksaanMayat"
                                        value="Tidak Ada">Tidak
                                    Ada</label>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Surat dari Rumah Sakit</label>
                                <br>
                                <label class="radio"><input type="radio" name="isSuratRumahSakit"
                                        value="Ada">Ada</label>

                                <label class="radio"><input type="radio" name="isSuratRumahSakit"
                                        value="Tidak Ada">Tidak Ada</label>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Surat dari Lurah / Catatan Sipil</label>
                                <br>
                                <label class="radio"><input type="radio" name="isSuratLurahOrCapil"
                                        value="Ada">Ada</label>

                                <label class="radio"><input type="radio" name="isSuratLurahOrCapil"
                                        value="Tidak Ada">Tidak Ada</label>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Surat Kematian</label>
                                <br>
                                <label class="radio"><input type="radio" name="issuratKematian" value="Ada">Ada</label>
                                <label class="radio"><input type="radio" name="issuratKematian" value="Tidak Ada">Tidak
                                    Ada</label>
                            </div>
                            <div class="form-group">
                                <label class="label-control">Catatan / Keterangan Lainnya</label>
                                <input type="text" name="keteranganLainnya"
                                    placeholder="Masukkan Catatan / Keterangan Lainnya" class="form-control" required>
                            </div>

                            <div class="form-group">
                                <label class="label-control">Apakah Data Sudah Terverifikasi?</label>
                                <br>
                                <label class="radio"><input type="radio" name="isVerifikasi" value="Ada">Ada</label>
                                <label class="radio"><input type="radio" name="isVerifikasi" value="Tidak Ada">Tidak
                                    Ada</label>
                            </div>
                            <button class="btn btn-primary btn-block">
                                Tambah Data
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>





<script src="https://unpkg.com/bootstrap-table@1.17.1/dist/bootstrap-table.min.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script>
    // your custom ajax request here
    function ajaxRequest2(params) {
        var url = 'https://examples.wenzhixin.net.cn/examples/bootstrap_table/data'
        $.get(url + '?' + $.param(params.data)).then(function (res) {
            params.success(res)
        })
    }
</script>
<script>
    $("input[required], select[required]").attr("oninvalid",
        "this.setCustomValidity('Masukkan ini tidak boleh kosong')");
    $("input[required], select[required]").attr("oninput", "setCustomValidity('')");

    function detailFormatter(index, row) {
        var html = []
        $.each(row, function (key, value) {
            html.push('<p><b>' + key + ':</b> ' + value + '</p>')
        })
        return html.join('')
    }

    function ajaxRequest(params) {
        var url = '/getDataMakam'
        $.get(url + '?' + $.param(params.data)).then(function (res) {
            params.success(res)
            console.log(res)
        })
    }

    var $table = $('#table')
    var $remove = $('#remove')
    var selections = []

    function getIdSelections() {
        return $.map($table.bootstrapTable('getSelections'), function (row) {
            return row.id
        })
    }

    function responseHandler(res) {
        $.each(res.rows, function (i, row) {
            row.state = $.inArray(row.id, selections) !== -1
        })
        return res
    }

    function detailFormatter(index, row) {
        var html = []
        $.each(row, function (key, value) {
            html.push('<p><b>' + key + ':</b> ' + value + '</p>')
        })
        return html.join('')
    }

    function operateFormatter(value, row, index) {
        return [
            '<a class="edit" href="javascript:void(0)" title="Edit Data">',
            '<button type="button" class="btn btn-primary">Edit Data</button>',
            '</a>',
            '<a class="remove" href="javascript:void(0)" title="Hapus Data">',
            '<button type="button" class="btn btn-danger">Hapus Data</button>',
            '</a>  ',
        ].join('')
    }

    window.operateEvents = {
        'click .edit': function (e, value, row, index) {
            alert('You click like action, rows: ' + JSON.stringify(row))

        },
        'click .remove': function (e, value, row, index) {
            $.post('/hapusDataMakam', // url
                row, // data to be submit
                function (data, status, jqXHR) { // success callback
                    alert('You click like action, row: ' + JSON.stringify(row))
                });

        },

    }

    function totalTextFormatter(data) {
        return 'Total'
    }

    function totalNameFormatter(data) {
        return data.length
    }

    function totalPriceFormatter(data) {
        var field = this.field
        return '$' + data.map(function (row) {
            return +row[field].substring(1)
        }).reduce(function (sum, i) {
            return sum + i
        }, 0)
    }

    function initTable() {
        $table.bootstrapTable('destroy').bootstrapTable({
            height: 550,
            locale: $('#locale').val(),
            columns: [
                [{
                        field: 'Nama Jenazah',
                        title: 'Nama Jenazah',
                        sortable: true,
                        footerFormatter: totalNameFormatter,
                        align: 'center'
                    },
                    {
                        field: 'Tanggal Meninggal',
                        title: 'Tanggal Meninggal',
                        sortable: true,
                        footerFormatter: totalNameFormatter,
                        align: 'center'
                    },
                    {
                        field: 'Nama Ahli Waris',
                        title: 'Nama Ahli Waris',
                        sortable: true,
                        footerFormatter: totalNameFormatter,
                        align: 'center'
                    },
                    {
                        field: 'No. Telepon Ahli Waris',
                        title: 'No. Telepon Ahli Waris',
                        sortable: true,
                        footerFormatter: totalNameFormatter,
                        align: 'center'
                    },
                    {
                        field: 'Edit Data',
                        title: 'Edit Data',
                        align: 'center',
                        clickToSelect: false,
                        events: window.operateEvents,
                        formatter: operateFormatter
                    }
                ]
            ]
        })
        $table.on('check.bs.table uncheck.bs.table ' +
            'check-all.bs.table uncheck-all.bs.table',
            function () {
                $remove.prop('disabled', !$table.bootstrapTable('getSelections').length)

                // save your data, here just save the current page
                selections = getIdSelections()
                // push or splice the selections if you want to save all data selections
            })
        $table.on('all.bs.table', function (e, name, args) {
            console.log(name, args)
        })
        $remove.click(function () {
            var ids = getIdSelections()
            $table.bootstrapTable('remove', {
                field: 'id',
                values: ids
            })
            $remove.prop('disabled', true)
        })
    }

    $(function () {
        initTable()
        $('#locale').change(initTable)
    })

    function DoPost() {
        $.post("WhateverPage.php", {
            name: "John",
            time: "2pm"
        }); //Your values here..
    }
</script>